https://github.com/isaacs/once/blob/master/once.js